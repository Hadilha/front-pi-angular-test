<div class="bg-white rounded-lg shadow-xl p-8 border border-blueGray-100">
    <h2
      class="text-3xl font-bold text-blueGray-800 mb-10 flex items-center gap-2"
    >
      <span class="text-4xl">🔥</span>
      <span>Community Forum</span>
    </h2>
    <!-- Category Filter Buttons -->
    <div class="flex gap-3 flex-wrap mb-6">
      <button
        *ngFor="let tag of tags"
        (click)="selectedCategory = tag; fetchPosts()"
        [ngClass]="{
          'bg-blue-600 text-white': selectedCategory === tag,
          'bg-white text-blue-600 border border-blue-300':
            selectedCategory !== tag
        }"
        class="px-4 py-2 rounded-full font-medium transition-all duration-200 shadow-sm"
      >
        #{{ tag }}
      </button>
    </div>

    <div class="space-y-8">
      <div
        *ngFor="let post of posts"
        class="cursor-pointer block rounded-2xl border border-blueGray-100 bg-white px-6 py-6 shadow-md hover:shadow-lg hover:border-blue-500 transition-all duration-300"
        (click)="openPost(post)"
      >
        <div class="flex items-center mb-4 gap-4">
          <img
            [src]="post.avatar || 'https://i.pravatar.cc/60'"
            alt="User"
            class="w-14 h-14 rounded-full border border-blue-300 shadow"
          />
          <div class="leading-tight">
            <h4 class="text-lg font-semibold text-blueGray-800">
              {{ post.author?.name || "Unknown Author" }}
            </h4>
            <span class="text-xs text-blueGray-400 block">{{
              post.createdAt
            }}</span>
          </div>
        </div>

        <h3 class="text-xl font-bold text-blueGray-900 mb-2">
          {{ post.title }}
        </h3>
        <p
          class="text-blueGray-600 text-sm leading-relaxed mb-4 line-clamp-3"
        >
          {{ post.content }}
        </p>

        <div
          class="flex items-center justify-between text-sm text-blueGray-500"
        >
          <div class="flex space-x-6">
            <span class="flex items-center">
              <i class="fas fa-comments mr-2 text-blue-500"></i>
              {{ post.replies }} replies
            </span>
            <span class="flex items-center">
              <i class="fas fa-thumbs-up mr-2 text-green-500"></i>
              {{ post.likes }} likes
            </span>
          </div>

          <!-- Dynamically display the category/tag here -->
          <span
            class="text-xs bg-blue-100 text-blue-600 px-3 py-1 rounded-full font-medium"
          >
            #{{ post.tag }}
          </span>

          <!-- Delete Button -->
          <button
            *ngIf="post.author?.name === currentUser"
            (click)="deletePost(post.id)"
            class="text-red-500 hover:text-red-700 transition-all duration-150 text-lg"
          >
            🗑️ Delete
          </button>
        </div>
      </div>
    </div>
  </div>

  <app-post-detail-modal
  *ngIf="selectedPost"
  [selectedPost]="selectedPost"
  [posts]="posts"
  (closeModal)="selectedPost = null"
></app-post-detail-modal>

